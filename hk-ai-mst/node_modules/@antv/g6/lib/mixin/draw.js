/**
 * @fileOverview draw
 * @author huangtonger@aliyun.com
 */
var Mixin = {};
Mixin.INIT = '_initDraw';
Mixin.AUGMENT = {
  _initDraw: function _initDraw() {
    var _this = this;

    var controllers = this.get('_controllers');
    var canvas = this.get('_canvas');
    var animateDraw = this.get('_animateDraw');
    var animateController = controllers.animate;

    var simpleDraw = function simpleDraw() {
      canvas.draw();
    };

    var draw;

    if (animateDraw) {
      draw = function draw() {
        var forcePreventAnimate = _this.get('forcePreventAnimate');

        if (forcePreventAnimate) {
          animateController.updateStash();
          simpleDraw();
        } else {
          animateDraw();
        }
      };
    } else {
      draw = simpleDraw;
    }

    this.draw = draw;
  }
};
module.exports = Mixin;