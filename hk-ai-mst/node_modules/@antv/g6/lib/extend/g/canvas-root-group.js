/**
 * @fileOverview freeze size group
 * @author huangtonger@aliyun.com
 */

var G = require('@antv/g');
var Util = require('../../util/');

var Group = function Group(cfg) {
  G.canvas.Group.superclass.constructor.call(this, cfg.canvas);
  this.set('children', []);
};

Util.extend(Group, G.canvas.Group);

Util.augment(Group, {
  drawInner: function drawInner(context) {
    var _this = this;

    this.deepEach(function (child) {
      var freezePoint = child.get('freezePoint');
      var scale = _this.getMatrix()[0];
      if (child.isShape && freezePoint && child.get('visible')) {
        child.initTransform();
        child.transform([['t', -freezePoint.x, -freezePoint.y], ['s', 1 / scale, 1 / scale], ['t', freezePoint.x, freezePoint.y]]);
      }
    });
    Group.superclass.drawInner.call(this, context);
  }
});

module.exports = Group;